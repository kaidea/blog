<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>步骤3：本地创建实例vue项目并上传到github上 | embers blog</title>
    <meta name="description" content="全栈进阶之路">
    <link rel="preload stylesheet" href="/blog/assets/style.1a8c354d.css" as="style">
    
    <script type="module" src="/blog/assets/app.17685c29.js"></script>
    <link rel="preload" href="/blog/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/blog/assets/chunks/framework.82dd189e.js">
    <link rel="modulepreload" href="/blog/assets/chunks/theme.2c740f86.js">
    <link rel="modulepreload" href="/blog/assets/docs_vue_vue部署.md.16f2af4c.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-9d8abc1e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-9d8abc1e data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-f1abbc6e><div class="container" data-v-f1abbc6e><div class="title" data-v-f1abbc6e><div class="VPNavBarTitle" data-v-f1abbc6e data-v-2973dbb4><a class="title" href="/blog/" data-v-2973dbb4><!--[--><!--]--><!----><!--[-->embers blog<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-f1abbc6e><div class="curtain" data-v-f1abbc6e></div><div class="content-body" data-v-f1abbc6e><!--[--><!--]--><div class="VPNavBarSearch search" data-v-f1abbc6e><!----></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-f1abbc6e data-v-f732b5d0><span id="main-nav-aria-label" class="visually-hidden" data-v-f732b5d0>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-aa8de344><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-aa8de344><span class="text" data-v-aa8de344><!----><span data-v-aa8de344>java</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-aa8de344><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-aa8de344><div class="VPMenu" data-v-aa8de344 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/blog/docs/minecraft/01-%E6%90%AD%E5%BB%BAvscode%E6%A8%A1%E7%BB%84%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83.html" data-v-f51f088d><!--[-->minecraft模组开发<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/blog/yule/gtnh.html" data-v-f51f088d><!--[-->GTNH(格雷科技新视野)<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-aa8de344><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-aa8de344><span class="text" data-v-aa8de344><!----><span data-v-aa8de344>web效果</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-aa8de344><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-aa8de344><div class="VPMenu" data-v-aa8de344 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/blog/css/basic/01-aspect-ratio.html" data-v-f51f088d><!--[-->css<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-aa8de344><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-aa8de344><span class="text" data-v-aa8de344><!----><span data-v-aa8de344>js</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-aa8de344><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-aa8de344><div class="VPMenu" data-v-aa8de344 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/blog/basic/js/01-call_apply_bind.html" data-v-f51f088d><!--[-->基础操作<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-f732b5d0 data-v-aa8de344><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-aa8de344><span class="text" data-v-aa8de344><!----><span data-v-aa8de344>框架</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-aa8de344><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-aa8de344><div class="VPMenu" data-v-aa8de344 data-v-e42ed9b3><div class="items" data-v-e42ed9b3><!--[--><!--[--><div class="VPMenuLink" data-v-e42ed9b3 data-v-f51f088d><a class="VPLink link" href="/blog/docs/reactNative/index.html" data-v-f51f088d><!--[-->reactNative<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-f1abbc6e data-v-283b26e9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-283b26e9 data-v-3329432d data-v-1c29e291><span class="check" data-v-1c29e291><span class="icon" data-v-1c29e291><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3329432d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3329432d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><!----><div class="VPFlyout VPNavBarExtra extra" data-v-f1abbc6e data-v-8e87c032 data-v-aa8de344><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-aa8de344><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-aa8de344><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-aa8de344><div class="VPMenu" data-v-aa8de344 data-v-e42ed9b3><!----><!--[--><!--[--><!----><div class="group" data-v-8e87c032><div class="item appearance" data-v-8e87c032><p class="label" data-v-8e87c032>Appearance</p><div class="appearance-action" data-v-8e87c032><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-8e87c032 data-v-3329432d data-v-1c29e291><span class="check" data-v-1c29e291><span class="icon" data-v-1c29e291><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-3329432d><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-3329432d><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><!----><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-f1abbc6e data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav fixed reached-top" data-v-9d8abc1e data-v-9e669cc1><!----><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-9e669cc1 data-v-24251f6f><button data-v-24251f6f>Return to top</button><!----></div></div><!----><div class="VPContent" id="VPContent" data-v-9d8abc1e data-v-3cf691b6><div class="VPDoc has-aside" data-v-3cf691b6 data-v-a3c25e27><!--[--><!--]--><div class="container" data-v-a3c25e27><div class="aside" data-v-a3c25e27><div class="aside-curtain" data-v-a3c25e27></div><div class="aside-container" data-v-a3c25e27><div class="aside-content" data-v-a3c25e27><div class="VPDocAside" data-v-a3c25e27 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" role="navigation" data-v-cb998dce data-v-3a6c4994><div class="content" data-v-3a6c4994><div class="outline-marker" data-v-3a6c4994></div><div class="outline-title" role="heading" aria-level="2" data-v-3a6c4994>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-3a6c4994><span class="visually-hidden" id="doc-outline-aria-label" data-v-3a6c4994> Table of Contents for current page </span><ul class="root" data-v-3a6c4994 data-v-463da30f><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-a3c25e27><div class="content-container" data-v-a3c25e27><!--[--><!--]--><!----><main class="main" data-v-a3c25e27><div style="position:relative;" class="vp-doc _blog_docs_vue_vue%E9%83%A8%E7%BD%B2" data-v-a3c25e27><div><h2 id="部署vue-项目" tabindex="-1">部署vue 项目 <a class="header-anchor" href="#部署vue-项目" aria-label="Permalink to &quot;部署vue 项目&quot;">​</a></h2><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.comimage-20200716112220683.png" alt="image-20200716112220683"></p><h2 id="_1-购买服务器" tabindex="-1">1.购买服务器 <a class="header-anchor" href="#_1-购买服务器" aria-label="Permalink to &quot;1.购买服务器&quot;">​</a></h2><ol><li>重置服务器实例密码</li></ol><h2 id="_2-远程连接服务器" tabindex="-1">2. 远程连接服务器 <a class="header-anchor" href="#_2-远程连接服务器" aria-label="Permalink to &quot;2. 远程连接服务器&quot;">​</a></h2><ol><li>安装 findlshell</li><li>连接服务器</li></ol><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.comimage-20200716115913662.png" alt="image-20200716115913662"></p><h2 id="_3-centos7-5-安装docker" tabindex="-1">3.CentOS7.5 安装docker <a class="header-anchor" href="#_3-centos7-5-安装docker" aria-label="Permalink to &quot;3.CentOS7.5 安装docker&quot;">​</a></h2><p>Docker 支持以下的 64 位 CentOS 版本：</p><ul><li>CentOS 7</li><li>CentOS 8</li><li>更高版本...</li></ul><h3 id="_1-卸载旧的版本" tabindex="-1">1. 卸载旧的版本 <a class="header-anchor" href="#_1-卸载旧的版本" aria-label="Permalink to &quot;1. 卸载旧的版本&quot;">​</a></h3><blockquote><p>较旧的 Docker 版本称为 docker 或 docker-engine 。如果已安装这些程序，请卸载它们以及相关的依赖项。</p></blockquote><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sudo yum remove docker \</span></span>
<span class="line"><span style="color:#E1E4E8;">                  docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">client \</span></span>
<span class="line"><span style="color:#E1E4E8;">                  docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">client</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">latest \</span></span>
<span class="line"><span style="color:#E1E4E8;">                  docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">common \</span></span>
<span class="line"><span style="color:#E1E4E8;">                  docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">latest \</span></span>
<span class="line"><span style="color:#E1E4E8;">                  docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">latest</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">logrotate \</span></span>
<span class="line"><span style="color:#E1E4E8;">                  docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">logrotate \</span></span>
<span class="line"><span style="color:#E1E4E8;">                  docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">engine</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sudo yum remove docker \</span></span>
<span class="line"><span style="color:#24292E;">                  docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">client \</span></span>
<span class="line"><span style="color:#24292E;">                  docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">client</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">latest \</span></span>
<span class="line"><span style="color:#24292E;">                  docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">common \</span></span>
<span class="line"><span style="color:#24292E;">                  docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">latest \</span></span>
<span class="line"><span style="color:#24292E;">                  docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">latest</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">logrotate \</span></span>
<span class="line"><span style="color:#24292E;">                  docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">logrotate \</span></span>
<span class="line"><span style="color:#24292E;">                  docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">engine</span></span></code></pre></div><h3 id="_2-安装-docker-engine-community" tabindex="-1">2. 安装 Docker Engine-Community <a class="header-anchor" href="#_2-安装-docker-engine-community" aria-label="Permalink to &quot;2. 安装 Docker Engine-Community&quot;">​</a></h3><h4 id="_1-使用-docker-仓库进行安装" tabindex="-1">(1) 使用 Docker 仓库进行安装 <a class="header-anchor" href="#_1-使用-docker-仓库进行安装" aria-label="Permalink to &quot;(1) 使用 Docker 仓库进行安装&quot;">​</a></h4><blockquote><p>在新主机上首次安装 Docker Engine-Community 之前，需要设置 Docker 仓库。之后，您可以从仓库安装和更新 Docker。</p></blockquote><ul><li>设置仓库</li></ul><blockquote><p>安装所需的软件包。yum-utils 提供了 yum-config-manager ，并且 device mapper 存储驱动程序需要 device-mapper-persistent-data 和 lvm2。</p></blockquote><div class="language-kotlin vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">kotlin</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sudo yum install </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">y yum</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">utils  device</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">mapper</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">persistent</span><span style="color:#F97583;">-data</span><span style="color:#E1E4E8;">  lvm2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sudo yum install </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">y yum</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">utils  device</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">mapper</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">persistent</span><span style="color:#D73A49;">-data</span><span style="color:#24292E;">  lvm2</span></span></code></pre></div><ul><li>使用以下命令来设置稳定的仓库。</li></ul><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sudo yum</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">config</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">manager \</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">add</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">repo \</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">https:</span><span style="color:#9ECBFF;">//</span><span style="color:#E1E4E8;">download.docker.com</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">linux</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">centos</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce.repo</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sudo yum</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">config</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">manager \</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">add</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">repo \</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">https:</span><span style="color:#032F62;">//</span><span style="color:#24292E;">download.docker.com</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">linux</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">centos</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce.repo</span></span></code></pre></div><h4 id="_2-安装-docker-engine-community-1" tabindex="-1">(2) 安装 Docker Engine-Community <a class="header-anchor" href="#_2-安装-docker-engine-community-1" aria-label="Permalink to &quot;(2) 安装 Docker Engine-Community&quot;">​</a></h4><blockquote><p>安装最新版本的 Docker Engine-Community 和 containerd，或者转到下一步安装特定版本：</p></blockquote><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sudo yum install docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">cli containerd.io</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sudo yum install docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">cli containerd.io</span></span></code></pre></div><blockquote><p>如果提示您接受 GPG 密钥，请选是。</p></blockquote><h4 id="_3-可选-安装指定-版本的docker" tabindex="-1">(3) 可选：安装指定 版本的docker <a class="header-anchor" href="#_3-可选-安装指定-版本的docker" aria-label="Permalink to &quot;(3) 可选：安装指定 版本的docker&quot;">​</a></h4><blockquote><p>要安装特定版本的 Docker Engine-Community，请在存储库中列出可用版本，然后选择并安装：</p></blockquote><ul><li>1、列出并排序您存储库中可用的版本。此示例按版本号（从高到低）对结果进行排序。</li></ul><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ yum list docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">showduplicates </span><span style="color:#F97583;">|</span><span style="color:#E1E4E8;"> sort </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">r</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce.x86_64  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">:</span><span style="color:#FDAEB7;font-style:italic;">18.09.1</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">3.el7</span><span style="color:#E1E4E8;">                     docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">stable</span></span>
<span class="line"><span style="color:#E1E4E8;">docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce.x86_64  </span><span style="color:#79B8FF;">3</span><span style="color:#E1E4E8;">:</span><span style="color:#FDAEB7;font-style:italic;">18.09.0</span><span style="color:#F97583;">-</span><span style="color:#FDAEB7;font-style:italic;">3.el7</span><span style="color:#E1E4E8;">                     docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">stable</span></span>
<span class="line"><span style="color:#E1E4E8;">docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce.x86_64  </span><span style="color:#FDAEB7;font-style:italic;">18.06.1.ce-3.el7</span><span style="color:#E1E4E8;">                    docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">stable</span></span>
<span class="line"><span style="color:#E1E4E8;">docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce.x86_64  </span><span style="color:#FDAEB7;font-style:italic;">18.06.0.ce-3.el7</span><span style="color:#E1E4E8;">                    docker</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">ce</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">stable</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ yum list docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">showduplicates </span><span style="color:#D73A49;">|</span><span style="color:#24292E;"> sort </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">r</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce.x86_64  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">:</span><span style="color:#B31D28;font-style:italic;">18.09.1</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">3.el7</span><span style="color:#24292E;">                     docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">stable</span></span>
<span class="line"><span style="color:#24292E;">docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce.x86_64  </span><span style="color:#005CC5;">3</span><span style="color:#24292E;">:</span><span style="color:#B31D28;font-style:italic;">18.09.0</span><span style="color:#D73A49;">-</span><span style="color:#B31D28;font-style:italic;">3.el7</span><span style="color:#24292E;">                     docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">stable</span></span>
<span class="line"><span style="color:#24292E;">docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce.x86_64  </span><span style="color:#B31D28;font-style:italic;">18.06.1.ce-3.el7</span><span style="color:#24292E;">                    docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">stable</span></span>
<span class="line"><span style="color:#24292E;">docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce.x86_64  </span><span style="color:#B31D28;font-style:italic;">18.06.0.ce-3.el7</span><span style="color:#24292E;">                    docker</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">ce</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">stable</span></span></code></pre></div><ul><li>2.通过其完整的软件包名称安装特定版本，该软件包名称是软件包名称（docker-ce）加上版本字符串（第二列），从第一个冒号（:）一直到第一个连字符，并用连字符（-）分隔。例如：docker-ce-18.09.1。</li></ul><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sudo yum install docker-ce-&lt;</span><span style="color:#85E89D;">VERSION_STRING</span><span style="color:#E1E4E8;">&gt; docker-ce-cli-&lt;</span><span style="color:#85E89D;">VERSION_STRING</span><span style="color:#E1E4E8;">&gt; containerd.io</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sudo yum install docker-ce-&lt;</span><span style="color:#22863A;">VERSION_STRING</span><span style="color:#24292E;">&gt; docker-ce-cli-&lt;</span><span style="color:#22863A;">VERSION_STRING</span><span style="color:#24292E;">&gt; containerd.io</span></span></code></pre></div><h3 id="_3-启动-docker" tabindex="-1">3. 启动 Docker <a class="header-anchor" href="#_3-启动-docker" aria-label="Permalink to &quot;3. 启动 Docker&quot;">​</a></h3><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sudo systemctl start docker</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sudo systemctl start docker</span></span></code></pre></div><h3 id="_4-通过运行-hello-world-映像来验证是否正确安装了-docker-engine-community-。" tabindex="-1">4. 通过运行 hello-world 映像来验证是否正确安装了 Docker Engine-Community 。 <a class="header-anchor" href="#_4-通过运行-hello-world-映像来验证是否正确安装了-docker-engine-community-。" aria-label="Permalink to &quot;4. 通过运行 hello-world 映像来验证是否正确安装了 Docker Engine-Community 。&quot;">​</a></h3><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sudo docker run hello</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">world</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sudo docker run hello</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">world</span></span></code></pre></div><h2 id="_4-centos7-5基于docker安装nginx" tabindex="-1">4.CentOS7.5基于docker安装nginx <a class="header-anchor" href="#_4-centos7-5基于docker安装nginx" aria-label="Permalink to &quot;4.CentOS7.5基于docker安装nginx&quot;">​</a></h2><h4 id="_1-查看docker已经下载的-已有的-镜像" tabindex="-1">1. 查看docker已经下载的(已有的)镜像 <a class="header-anchor" href="#_1-查看docker已经下载的-已有的-镜像" aria-label="Permalink to &quot;1. 查看docker已经下载的(已有的)镜像&quot;">​</a></h4><blockquote><p>请忽略我已下载好的nginx镜像</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-d0780217548d6496.png" alt="img"></p><h4 id="_2-去官方公有仓库查询nginx镜像" tabindex="-1">2. 去官方公有仓库查询nginx镜像 <a class="header-anchor" href="#_2-去官方公有仓库查询nginx镜像" aria-label="Permalink to &quot;2. 去官方公有仓库查询nginx镜像&quot;">​</a></h4><blockquote><p>其中第一个就是nginx官网镜像，且STARS最多，我们这次就用这个</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.comguokai1.oss-cn-beijing.aliyuncs.com6555843-a57af60217fb3a6b.png" alt="img"></p><h4 id="_3-拉取该镜像" tabindex="-1">3. 拉取该镜像 <a class="header-anchor" href="#_3-拉取该镜像" aria-label="Permalink to &quot;3. 拉取该镜像&quot;">​</a></h4><blockquote><p>因为我之前拉取过，所以后面的输出和第一次拉取的输出不是太一致</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-7803a1a3f38ea772.png" alt="img"></p><h4 id="_4-再次查看本地镜像" tabindex="-1">4. 再次查看本地镜像 <a class="header-anchor" href="#_4-再次查看本地镜像" aria-label="Permalink to &quot;4. 再次查看本地镜像&quot;">​</a></h4><blockquote><p>此时，就看到本地有了该镜像</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.comguokai1.oss-cn-beijing.aliyuncs.com6555843-423952f67e03115b.png" alt="img"></p><h4 id="_5-启动一下该镜像-使用nginx服务-代理本机8080端口-测试是不是好使" tabindex="-1">5. 启动一下该镜像，使用nginx服务，代理本机8080端口(测试是不是好使) <a class="header-anchor" href="#_5-启动一下该镜像-使用nginx服务-代理本机8080端口-测试是不是好使" aria-label="Permalink to &quot;5. 启动一下该镜像，使用nginx服务，代理本机8080端口(测试是不是好使)&quot;">​</a></h4><blockquote><p>-d: 后台运行 -p: 端口映射 冒号前是本机端口，冒号后是容器端口</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-fe61ee5fc160b486.png" alt="img"></p><blockquote><p>访问本机ip:8080 即可访问该页面，代表nginx启动成功</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-eeab6ed4911ce019.png" alt="img"></p><h4 id="_6-关闭容器" tabindex="-1">6.关闭容器 <a class="header-anchor" href="#_6-关闭容器" aria-label="Permalink to &quot;6.关闭容器&quot;">​</a></h4><blockquote><p>docker stop XXXXX(容器id前几位)</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-639d110754b4f9d3.png" alt="img"></p><h3 id="not-end" tabindex="-1">not end <a class="header-anchor" href="#not-end" aria-label="Permalink to &quot;not end&quot;">​</a></h3><blockquote><p>至此 简单的docker安装nginx并启动算是成功了，接下来就会产生一个疑问，如果我想修改nginx的配置怎么办，我想更改nginx中的资源文件怎么办？接下来给出一个最实用的办法，就是将容器中的目录和本机目录做映射，以达到修改本机目录文件就影响到容器中的文件。</p></blockquote><h4 id="_1-本机创建实例文件夹" tabindex="-1">1.本机创建实例文件夹 <a class="header-anchor" href="#_1-本机创建实例文件夹" aria-label="Permalink to &quot;1.本机创建实例文件夹&quot;">​</a></h4><blockquote><p>/home文件夹下新建mutou文件夹，木头文件夹下新建nginx文件夹，nginx文件夹下新建conf.d文件夹，html文件夹，大致结构如下：</p></blockquote><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">home</span></span>
<span class="line"><span style="color:#DBEDFF;">    |---mutou</span></span>
<span class="line"><span style="color:#DBEDFF;">           |----nginx</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----conf.d</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----html</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/home</span></span>
<span class="line"><span style="color:#032F62;">    |---mutou</span></span>
<span class="line"><span style="color:#032F62;">           |----nginx</span></span>
<span class="line"><span style="color:#032F62;">                  |----conf.d</span></span>
<span class="line"><span style="color:#032F62;">                  |----html</span></span></code></pre></div><h4 id="_2-在conf-d文件夹下新建default-conf文件-内容如下" tabindex="-1">2. 在conf.d文件夹下新建default.conf文件，内容如下： <a class="header-anchor" href="#_2-在conf-d文件夹下新建default-conf文件-内容如下" aria-label="Permalink to &quot;2. 在conf.d文件夹下新建default.conf文件，内容如下：&quot;">​</a></h4><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">server</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">listen</span><span style="color:#E1E4E8;">       </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">server_name</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">localhost</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 原来的配置，匹配根路径</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#location / {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#    root   /usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#    index  index.html index.htm;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">#}</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;"># 更该配置，匹配/路径，修改index.html的名字，用于区分该配置文件替换了容器中的配置文件</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">location</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">root</span><span style="color:#E1E4E8;">   </span><span style="color:#9ECBFF;">/usr/share/nginx/html</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#B392F0;">index</span><span style="color:#E1E4E8;">  </span><span style="color:#9ECBFF;">index-test.html</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">index.htm</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">server</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">listen</span><span style="color:#24292E;">       </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">server_name</span><span style="color:#24292E;">  </span><span style="color:#032F62;">localhost</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># 原来的配置，匹配根路径</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">#location / {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">#    root   /usr/share/nginx/html;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">#    index  index.html index.htm;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">#}</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;"># 更该配置，匹配/路径，修改index.html的名字，用于区分该配置文件替换了容器中的配置文件</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">location</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/</span><span style="color:#24292E;"> </span><span style="color:#032F62;">{</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">root</span><span style="color:#24292E;">   </span><span style="color:#032F62;">/usr/share/nginx/html</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#6F42C1;">index</span><span style="color:#24292E;">  </span><span style="color:#032F62;">index-test.html</span><span style="color:#24292E;"> </span><span style="color:#032F62;">index.htm</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="_3-在html中编写index-test-html-用以判断文件夹映射成功-内容如下" tabindex="-1">3.在html中编写index-test.html，用以判断文件夹映射成功，内容如下： <a class="header-anchor" href="#_3-在html中编写index-test-html-用以判断文件夹映射成功-内容如下" aria-label="Permalink to &quot;3.在html中编写index-test.html，用以判断文件夹映射成功，内容如下：&quot;">​</a></h4><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;it is html1&lt;/</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">h2</span><span style="color:#24292E;">&gt;it is html1&lt;/</span><span style="color:#22863A;">h2</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h4 id="_4-启动nginx-8080-映射路径" tabindex="-1">4. 启动nginx(8080)，映射路径 <a class="header-anchor" href="#_4-启动nginx-8080-映射路径" aria-label="Permalink to &quot;4. 启动nginx(8080)，映射路径&quot;">​</a></h4><blockquote><p>命令比较长，其实就是多加了两个参数，-v，-v的意思就是冒号前面代表本机路径，冒号后面代表容器内的路径，两个路径进行了映射，本机路径中的文件会覆盖容器内的文件。 nginx容器内的一些文件位置： 日志位置：/var/log/nginx/ 配置文件位置：/etc/nginx/ 项目位置：/usr/share/nginx/html</p></blockquote><p>启动代码如下：</p><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker run </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">d </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">home</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">mutou</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf.d:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf.d  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">home</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">mutou</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">html</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">share</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">html nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">8080</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">80</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">home</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">mutou</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf.d:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf.d  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">home</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">mutou</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">html</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">share</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">html nginx</span></span></code></pre></div><p><img src="https://upload-images.jianshu.io/upload_images/6555843-8f2412767fec275b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/851/format/webp" alt="img"></p><h4 id="_5-验证" tabindex="-1">5. 验证 <a class="header-anchor" href="#_5-验证" aria-label="Permalink to &quot;5. 验证&quot;">​</a></h4><blockquote><p>此时访问ip:8080，发现展示的不是nginx的默认页面了，而是我们新加入的页面，这样就证明我们两个<code>-v</code>映射的文件夹都起作用了。</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-23023f15920737f0.png" alt="img"></p><p>image.png</p><h4 id="_6-开始反向代理" tabindex="-1">6. 开始反向代理 <a class="header-anchor" href="#_6-开始反向代理" aria-label="Permalink to &quot;6. 开始反向代理&quot;">​</a></h4><blockquote><p>此时静态页面网站已经部署上了，但是还是会显示一个端口8080出来，就十分不爽，怎么把端口干掉呢？而是换成XXXXX.com/demo1 或者 XXXXX.com/demo2这种效果呢？下面使用nginx的反向代理实现。</p></blockquote><h4 id="_7-增加文件夹-达到下面的效果" tabindex="-1">7. 增加文件夹，达到下面的效果 <a class="header-anchor" href="#_7-增加文件夹-达到下面的效果" aria-label="Permalink to &quot;7. 增加文件夹，达到下面的效果&quot;">​</a></h4><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">home</span></span>
<span class="line"><span style="color:#DBEDFF;">    |---mutou</span></span>
<span class="line"><span style="color:#DBEDFF;">           |----nginx</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----conf.d</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----html</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----conf.d2</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/home</span></span>
<span class="line"><span style="color:#032F62;">    |---mutou</span></span>
<span class="line"><span style="color:#032F62;">           |----nginx</span></span>
<span class="line"><span style="color:#032F62;">                  |----conf.d</span></span>
<span class="line"><span style="color:#032F62;">                  |----html</span></span>
<span class="line"><span style="color:#032F62;">                  |----conf.d2</span></span></code></pre></div><blockquote><p>我们在conf.d2中配置另一个nginx容器的配置文件，文件内容如下：</p></blockquote><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">server {</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen       </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">server_name</span><span style="color:#E1E4E8;">  </span><span style="color:#B392F0;">localhost</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">mutou {</span></span>
<span class="line"><span style="color:#E1E4E8;">        # 在该位置配置反向代理，将ip/mutou请求拦截，发送给8080端口，如果不是本机请使用公网ip</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_pass   </span><span style="color:#B392F0;">http</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//你的刚才的ip地址:8080/;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">server {</span></span>
<span class="line"><span style="color:#24292E;">    listen       </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">server_name</span><span style="color:#24292E;">  </span><span style="color:#6F42C1;">localhost</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">mutou {</span></span>
<span class="line"><span style="color:#24292E;">        # 在该位置配置反向代理，将ip/mutou请求拦截，发送给8080端口，如果不是本机请使用公网ip</span></span>
<span class="line"><span style="color:#24292E;">        proxy_pass   </span><span style="color:#6F42C1;">http</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//你的刚才的ip地址:8080/;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h4 id="_8-再启动一个nginx-80-专门作为反向代理映射-将本机80端口代理到nginx的80端口上-并映射两端的配置文件地址。" tabindex="-1">8. 再启动一个nginx(80)，专门作为反向代理映射，将本机80端口代理到nginx的80端口上，并映射两端的配置文件地址。 <a class="header-anchor" href="#_8-再启动一个nginx-80-专门作为反向代理映射-将本机80端口代理到nginx的80端口上-并映射两端的配置文件地址。" aria-label="Permalink to &quot;8. 再启动一个nginx(80)，专门作为反向代理映射，将本机80端口代理到nginx的80端口上，并映射两端的配置文件地址。&quot;">​</a></h4><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker run </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">d </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">home</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">mutou</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf.d2:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf.d nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">80</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">home</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">mutou</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf.d2:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf.d nginx</span></span></code></pre></div><blockquote><p>此时 访问 ip/demo1 即可映射到了ip:8080上，成功完成反向代理。</p><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-31846297fdb31716.png" alt="img"></p><p>image.png</p></blockquote><h4 id="_9-拓展" tabindex="-1">9.拓展 <a class="header-anchor" href="#_9-拓展" aria-label="Permalink to &quot;9.拓展&quot;">​</a></h4><blockquote><p>当有了反向代理后，自然而然就引出了<code>负载均衡</code>,下面简单实现<code>负载均衡</code>的效果，实现该效果再添加一个nginx，所以要增加一个文件夹。</p></blockquote><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">home</span></span>
<span class="line"><span style="color:#DBEDFF;">    |---mutou</span></span>
<span class="line"><span style="color:#DBEDFF;">           |----nginx</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----conf.d</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----html</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----conf.d2</span></span>
<span class="line"><span style="color:#DBEDFF;">                  |----html3</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">/home</span></span>
<span class="line"><span style="color:#032F62;">    |---mutou</span></span>
<span class="line"><span style="color:#032F62;">           |----nginx</span></span>
<span class="line"><span style="color:#032F62;">                  |----conf.d</span></span>
<span class="line"><span style="color:#032F62;">                  |----html</span></span>
<span class="line"><span style="color:#032F62;">                  |----conf.d2</span></span>
<span class="line"><span style="color:#032F62;">                  |----html3</span></span></code></pre></div><blockquote><p>html3中的代码如下：</p></blockquote><div class="language-xml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">&lt;</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">    &lt;</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;it is html3&lt;/</span><span style="color:#85E89D;">h2</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">  &lt;/</span><span style="color:#85E89D;">body</span><span style="color:#E1E4E8;">&gt;</span></span>
<span class="line"><span style="color:#E1E4E8;">&lt;/</span><span style="color:#85E89D;">html</span><span style="color:#E1E4E8;">&gt;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">&lt;</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">    &lt;</span><span style="color:#22863A;">h2</span><span style="color:#24292E;">&gt;it is html3&lt;/</span><span style="color:#22863A;">h2</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">  &lt;/</span><span style="color:#22863A;">body</span><span style="color:#24292E;">&gt;</span></span>
<span class="line"><span style="color:#24292E;">&lt;/</span><span style="color:#22863A;">html</span><span style="color:#24292E;">&gt;</span></span></code></pre></div><h4 id="_10-启动nginx-8081" tabindex="-1">10. 启动nginx(8081) <a class="header-anchor" href="#_10-启动nginx-8081" aria-label="Permalink to &quot;10. 启动nginx(8081)&quot;">​</a></h4><blockquote><p>启动命令如下：</p></blockquote><div class="language-jsx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">docker run </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">d </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">8081</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">home</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">mutou</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf.d:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">etc</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">conf.d  </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">home</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">mutou</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#B392F0;">html3</span><span style="color:#E1E4E8;">:</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">share</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">html nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">8081</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">80</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">home</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">mutou</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf.d:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">etc</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">conf.d  </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">home</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">mutou</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#6F42C1;">html3</span><span style="color:#24292E;">:</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">share</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">html nginx</span></span></code></pre></div><h4 id="_11-访问ip-8081" tabindex="-1">11. 访问ip:8081 <a class="header-anchor" href="#_11-访问ip-8081" aria-label="Permalink to &quot;11. 访问ip:8081&quot;">​</a></h4><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-15f8df36b52bc57f.png" alt="img"></p><p>image.png</p><h4 id="_12-配置负载均衡-访问ip-demo1时-平均分发到8080端口和8081端口上-即it-is-html1和it-is-html3间接出现。" tabindex="-1">12.配置负载均衡，访问ip/demo1时，平均分发到8080端口和8081端口上，即<code>it is html1</code>和<code>it is html3</code>间接出现。 <a class="header-anchor" href="#_12-配置负载均衡-访问ip-demo1时-平均分发到8080端口和8081端口上-即it-is-html1和it-is-html3间接出现。" aria-label="Permalink to &quot;12.配置负载均衡，访问ip/demo1时，平均分发到8080端口和8081端口上，即`it is html1`和`it is html3`间接出现。&quot;">​</a></h4><blockquote><p>配置负载均衡，那就是配置在第二次的nginx上，就是反向代理的nginx上，我们去conf.d2文件夹下，修改default.conf文件，如下：</p></blockquote><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">upstream group1{</span></span>
<span class="line"><span style="color:#E1E4E8;">    server 你的刚才的ip地址:</span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server 你的刚才的ip地址:</span><span style="color:#79B8FF;">8081</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">server {</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen       </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name  localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">demo1 {</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_pass   </span><span style="color:#B392F0;">http</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//group1/;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">upstream group1{</span></span>
<span class="line"><span style="color:#24292E;">    server 你的刚才的ip地址:</span><span style="color:#005CC5;">8080</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server 你的刚才的ip地址:</span><span style="color:#005CC5;">8081</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">server {</span></span>
<span class="line"><span style="color:#24292E;">    listen       </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server_name  localhost;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">demo1 {</span></span>
<span class="line"><span style="color:#24292E;">        proxy_pass   </span><span style="color:#6F42C1;">http</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//group1/;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><blockquote><p>此时，查看所有运行中的docker容器:<code>docker ps</code></p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-4d08b08beb1da199.png" alt="img"></p><p>image.png</p><blockquote><p>然后重启该容器，<code>docker restart 容器id</code></p></blockquote><h4 id="_13-查看效果" tabindex="-1">13. 查看效果 <a class="header-anchor" href="#_13-查看效果" aria-label="Permalink to &quot;13. 查看效果&quot;">​</a></h4><blockquote><p>访问ip/demo1，每次刷新页面，页面都会在html1和html3中进行切换，此时负载均衡的效果就实现了。</p></blockquote><p><img src="https://guokai1.oss-cn-beijing.aliyuncs.com/https://guokai1.oss-cn-beijing.aliyuncs.com6555843-d882deca020b5814.gif" alt="img"></p><p><a href="https://raw.githubusercontent.com/xicunyang/images/master/change-page.gif" target="_blank" rel="noreferrer">https://raw.githubusercontent.com/xicunyang/images/master/change-page.gif</a></p><h4 id="_14-配置负载均衡的权重" tabindex="-1">14. 配置负载均衡的权重 <a class="header-anchor" href="#_14-配置负载均衡的权重" aria-label="Permalink to &quot;14. 配置负载均衡的权重&quot;">​</a></h4><blockquote><p>可以使用下面的配置修改两个端口的权重(即谁被访问的概率大)</p></blockquote><div class="language-cpp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">cpp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">upstream group1{</span></span>
<span class="line"><span style="color:#E1E4E8;">    server 你的刚才的ip地址:</span><span style="color:#79B8FF;">8080</span><span style="color:#E1E4E8;"> weight</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">1</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server 你的刚才的ip地址:</span><span style="color:#79B8FF;">8081</span><span style="color:#E1E4E8;"> weight</span><span style="color:#F97583;">=</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">server {</span></span>
<span class="line"><span style="color:#E1E4E8;">    listen       </span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">    server_name  localhost;</span></span>
<span class="line"><span style="color:#E1E4E8;">    location </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">demo1 {</span></span>
<span class="line"><span style="color:#E1E4E8;">        proxy_pass   </span><span style="color:#B392F0;">http</span><span style="color:#E1E4E8;">:</span><span style="color:#6A737D;">//group1/;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">upstream group1{</span></span>
<span class="line"><span style="color:#24292E;">    server 你的刚才的ip地址:</span><span style="color:#005CC5;">8080</span><span style="color:#24292E;"> weight</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">1</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server 你的刚才的ip地址:</span><span style="color:#005CC5;">8081</span><span style="color:#24292E;"> weight</span><span style="color:#D73A49;">=</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">server {</span></span>
<span class="line"><span style="color:#24292E;">    listen       </span><span style="color:#005CC5;">80</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">    server_name  localhost;</span></span>
<span class="line"><span style="color:#24292E;">    location </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">demo1 {</span></span>
<span class="line"><span style="color:#24292E;">        proxy_pass   </span><span style="color:#6F42C1;">http</span><span style="color:#24292E;">:</span><span style="color:#6A737D;">//group1/;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h1 id="步骤3-本地创建实例vue项目并上传到github上" tabindex="-1">步骤3：本地创建实例vue项目并上传到github上 <a class="header-anchor" href="#步骤3-本地创建实例vue项目并上传到github上" aria-label="Permalink to &quot;步骤3：本地创建实例vue项目并上传到github上&quot;">​</a></h1><h4 id="_0-确保你的本机电脑是有node环境的-使用下面的命令检查一下" tabindex="-1">0. 确保你的本机电脑是有node环境的，使用下面的命令检查一下 <a class="header-anchor" href="#_0-确保你的本机电脑是有node环境的-使用下面的命令检查一下" aria-label="Permalink to &quot;0. 确保你的本机电脑是有node环境的，使用下面的命令检查一下&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-5fe4d154178f4704.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/323/format/webp" alt="img"></p><blockquote><p>如果没有显示版本号，证明你没有安装node环境，请移步度娘，搜索怎么安装node环境。</p></blockquote><h4 id="_0-1-安装好node之后-即得到了npm包管理工具-使用下面的命令检查一下" tabindex="-1">0.1 安装好node之后，即得到了npm包管理工具，使用下面的命令检查一下 <a class="header-anchor" href="#_0-1-安装好node之后-即得到了npm包管理工具-使用下面的命令检查一下" aria-label="Permalink to &quot;0.1 安装好node之后，即得到了npm包管理工具，使用下面的命令检查一下&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-24e458fbeeb86606.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/239/format/webp" alt="img"></p><blockquote><p>如果没有显示版本号，请检查原因。</p></blockquote><h4 id="_0-2-使用npm包管理工具安装vue-cli脚手架-安装命令如下" tabindex="-1">0.2 使用npm包管理工具安装vue-cli脚手架，安装命令如下： <a class="header-anchor" href="#_0-2-使用npm包管理工具安装vue-cli脚手架-安装命令如下" aria-label="Permalink to &quot;0.2 使用npm包管理工具安装vue-cli脚手架，安装命令如下：&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-985dcc1a3870a7b0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/839/format/webp" alt="img"></p><p>image.png</p><blockquote><p>如果直接使用<code>npm install -global vue-cli</code>安装的时候，会报没有权限的错误，此时在前面加上sudo即可，这是mac系统的解决方案，windows如果有这种情况，请自行查找解决方案。</p></blockquote><h4 id="_1-使用vue-cli生成vue项目" tabindex="-1">1. 使用vue-cli生成vue项目 <a class="header-anchor" href="#_1-使用vue-cli生成vue项目" aria-label="Permalink to &quot;1. 使用vue-cli生成vue项目&quot;">​</a></h4><blockquote><p>在任意一个文件夹下，使用vue-cli命令生成项目</p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/6555843-ac10de1d16c820eb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/907/format/webp" alt="img"></p><p>image.png</p><h4 id="_2-进入app-vue组件页面-简单修改" tabindex="-1">2. 进入App.vue组件页面，简单修改 <a class="header-anchor" href="#_2-进入app-vue组件页面-简单修改" aria-label="Permalink to &quot;2. 进入App.vue组件页面，简单修改&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-767eb4269b723374.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><h4 id="_4-使用npm-run-dev或者-yarn-dev启动项目" tabindex="-1">4. 使用<code>npm run dev</code>或者 <code>yarn dev</code>启动项目 <a class="header-anchor" href="#_4-使用npm-run-dev或者-yarn-dev启动项目" aria-label="Permalink to &quot;4. 使用`npm run dev`或者 `yarn dev`启动项目&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-34b4ee7e96955fd7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/667/format/webp" alt="img"></p><p>image.png</p><h4 id="_5-浏览器查看修改后的页面" tabindex="-1">5. 浏览器查看修改后的页面 <a class="header-anchor" href="#_5-浏览器查看修改后的页面" aria-label="Permalink to &quot;5. 浏览器查看修改后的页面&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-f30b7ae387132fa0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><h4 id="_6-分享该项目到github上-便于本机修改文件及时更新到服务器上" tabindex="-1">6. 分享该项目到github上(便于本机修改文件及时更新到服务器上) <a class="header-anchor" href="#_6-分享该项目到github上-便于本机修改文件及时更新到服务器上" aria-label="Permalink to &quot;6. 分享该项目到github上(便于本机修改文件及时更新到服务器上)&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-b8756e3494de34b5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><blockquote><p>上传的方式有很多种，这里我使用的是我平时比较常用的方法，直接在编辑器(WebStorm)中集成的github。</p></blockquote><h4 id="_7-github查看" tabindex="-1">7. github查看 <a class="header-anchor" href="#_7-github查看" aria-label="Permalink to &quot;7. github查看&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-c1a4a1de9d6cbedd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/365/format/webp" alt="img"></p><p>image.png</p><blockquote><p>此时github上就找到了该项目</p></blockquote><h4 id="_8-此时该步骤暂时结束-接下来就是在服务器上安装git并且登陆上。" tabindex="-1">8. 此时该步骤暂时结束，接下来就是在服务器上安装git并且登陆上。 <a class="header-anchor" href="#_8-此时该步骤暂时结束-接下来就是在服务器上安装git并且登陆上。" aria-label="Permalink to &quot;8. 此时该步骤暂时结束，接下来就是在服务器上安装git并且登陆上。&quot;">​</a></h4><h1 id="步骤4-centos7-5安装git-并拉取代码" tabindex="-1">步骤4：CentOS7.5安装Git，并拉取代码 <a class="header-anchor" href="#步骤4-centos7-5安装git-并拉取代码" aria-label="Permalink to &quot;步骤4：CentOS7.5安装Git，并拉取代码&quot;">​</a></h1><h4 id="_1-登录服务器-并执行安装git的命令" tabindex="-1">1. 登录服务器，并执行安装git的命令 <a class="header-anchor" href="#_1-登录服务器-并执行安装git的命令" aria-label="Permalink to &quot;1. 登录服务器，并执行安装git的命令&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-d66020548daaf9a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/992/format/webp" alt="img"></p><h4 id="_2-等待一下-安装结束后-检查是否安装成功-出现版本号即代表安装成功" tabindex="-1">2. 等待一下，安装结束后，检查是否安装成功，出现版本号即代表安装成功 <a class="header-anchor" href="#_2-等待一下-安装结束后-检查是否安装成功-出现版本号即代表安装成功" aria-label="Permalink to &quot;2. 等待一下，安装结束后，检查是否安装成功，出现版本号即代表安装成功&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-fb75519bfa72de38.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1070/format/webp" alt="img"></p><h4 id="_3-git配置" tabindex="-1">3. git配置 <a class="header-anchor" href="#_3-git配置" aria-label="Permalink to &quot;3. git配置&quot;">​</a></h4><ul><li>1.配置一个用于提交代码的用户，输入命令：</li></ul><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">git config </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">global user.name </span><span style="color:#9ECBFF;">&quot;Your Name&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">git config </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">global user.name </span><span style="color:#032F62;">&quot;Your Name&quot;</span></span></code></pre></div><ul><li>2.配置一个用户邮箱，输入命令：</li></ul><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">git config --global user</span><span style="color:#B392F0;">.email</span><span style="color:#E1E4E8;"> &quot;email@example.com&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">git config --global user</span><span style="color:#6F42C1;">.email</span><span style="color:#24292E;"> &quot;email@example.com&quot;</span></span></code></pre></div><ul><li>3.生成公钥和私钥，输入命令后一路回车即可：</li></ul><div class="language-css vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">css</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">ssh-keygen</span><span style="color:#E1E4E8;"> -t rsa -C &quot;youremail@example.com&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">ssh-keygen</span><span style="color:#24292E;"> -t rsa -C &quot;youremail@example.com&quot;</span></span></code></pre></div><p><img src="https://upload-images.jianshu.io/upload_images/6555843-b83df6da4fc06f6c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/771/format/webp" alt="img"></p><blockquote><p>该位置的文件稍等会用到</p></blockquote><h4 id="_4-打开github-找到setting" tabindex="-1">4. 打开github，找到setting <a class="header-anchor" href="#_4-打开github-找到setting" aria-label="Permalink to &quot;4. 打开github，找到setting&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-7259a6414ba2ecd9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><h4 id="_5-添加ssh-key" tabindex="-1">5. 添加SSH key <a class="header-anchor" href="#_5-添加ssh-key" aria-label="Permalink to &quot;5. 添加SSH key&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-4d1b02d0d9a0c4b2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><blockquote><p>title字段随便填写，Key字段请打开下面的文件，并复制内容粘贴进去。</p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/6555843-ca3ae4077abb1147.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><blockquote><p>然后就成功添加SSH key</p></blockquote><h4 id="_5-在服务器新建目录-拉取项目代码-使用git-clone命令" tabindex="-1">5. 在服务器新建目录，拉取项目代码,使用git clone命令 <a class="header-anchor" href="#_5-在服务器新建目录-拉取项目代码-使用git-clone命令" aria-label="Permalink to &quot;5. 在服务器新建目录，拉取项目代码,使用git clone命令&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-980092628da11ee2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><p><img src="https://upload-images.jianshu.io/upload_images/6555843-d0e2b68ea15af539.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/897/format/webp" alt="img"></p><p>image.png</p><blockquote><p>假如对git命令不太熟悉，请移步:<a href="https://www.jianshu.com/p/b9219699b8a2" target="_blank" rel="noreferrer">git相关操作记录</a></p></blockquote><h4 id="_6-至此-服务器端项目代码拉取完毕-接下来在本地编译该代码-生成静态文件" tabindex="-1">6. 至此，服务器端项目代码拉取完毕，接下来在本地编译该代码，生成静态文件 <a class="header-anchor" href="#_6-至此-服务器端项目代码拉取完毕-接下来在本地编译该代码-生成静态文件" aria-label="Permalink to &quot;6. 至此，服务器端项目代码拉取完毕，接下来在本地编译该代码，生成静态文件&quot;">​</a></h4><h1 id="步骤5-centos安装node环境-并编译前端项目" tabindex="-1">步骤5：CentOS安装node环境，并编译前端项目 <a class="header-anchor" href="#步骤5-centos安装node环境-并编译前端项目" aria-label="Permalink to &quot;步骤5：CentOS安装node环境，并编译前端项目&quot;">​</a></h1><h4 id="_1-centos安装node环境" tabindex="-1">1.centos安装node环境 <a class="header-anchor" href="#_1-centos安装node环境" aria-label="Permalink to &quot;1.centos安装node环境&quot;">​</a></h4><ul><li>1.下载nodejs最新的tar包</li></ul><blockquote><p>可以在下载页面<a href="https://links.jianshu.com/go?to=https%3A%2F%2Fnodejs.org%2Fen%2Fdownload%2F" target="_blank" rel="noreferrer">https://nodejs.org/en/download/</a>中找到下载地址。然后执行指令</p></blockquote><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ wget </span><span style="color:#79B8FF;">https:</span><span style="color:#9ECBFF;">//no</span><span style="color:#E1E4E8;">dejs.org</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">dist</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">v9.</span><span style="color:#79B8FF;">3.0</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v9.</span><span style="color:#79B8FF;">3.0</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">linux</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x64.tar.xz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ wget </span><span style="color:#005CC5;">https:</span><span style="color:#032F62;">//no</span><span style="color:#24292E;">dejs.org</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">dist</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">v9.</span><span style="color:#005CC5;">3.0</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v9.</span><span style="color:#005CC5;">3.0</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">linux</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x64.tar.xz</span></span></code></pre></div><ul><li>2,解压包</li></ul><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ tar </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">xvf node</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v9.</span><span style="color:#79B8FF;">3.0</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">linux</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x64.tar.xz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ tar </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">xvf node</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v9.</span><span style="color:#005CC5;">3.0</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">linux</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x64.tar.xz</span></span></code></pre></div><ul><li>3.部署bin文件</li></ul><blockquote><p>先确认你nodejs的路径，我这里的路径为~/node-v9.3.0-linux-x64/bin。确认后依次执行</p></blockquote><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ ln </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">s </span><span style="color:#F97583;">~</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">node-v9.3.0-linux-x64</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">node</span></span>
<span class="line"><span style="color:#E1E4E8;">$ ln </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">s </span><span style="color:#F97583;">~</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">node-v9.3.0-linux-x64</span><span style="color:#9ECBFF;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">npm </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">npm</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ ln </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">s </span><span style="color:#D73A49;">~</span><span style="color:#032F62;">/node-v9.3.0-linux-x64/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">node</span></span>
<span class="line"><span style="color:#24292E;">$ ln </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">s </span><span style="color:#D73A49;">~</span><span style="color:#032F62;">/node-v9.3.0-linux-x64/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">npm </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">npm</span></span></code></pre></div><blockquote><p>注意ln指令用于创建关联（类似与Windows的快捷方式）必须给全路径，否则可能关联错误。</p></blockquote><ul><li><ol><li>测试一下</li></ol></li></ul><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ node </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ node </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v</span></span></code></pre></div><h4 id="_2-安装yarn-可选" tabindex="-1">2. 安装yarn(可选) <a class="header-anchor" href="#_2-安装yarn-可选" aria-label="Permalink to &quot;2. 安装yarn(可选)&quot;">​</a></h4><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ npm install yarn </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">g</span></span>
<span class="line"><span style="color:#E1E4E8;">$ ln </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">s </span><span style="color:#F97583;">~</span><span style="color:#9ECBFF;">/</span><span style="color:#DBEDFF;">node</span><span style="color:#9ECBFF;">/no</span><span style="color:#E1E4E8;">de</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v9.</span><span style="color:#79B8FF;">3.0</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">linux</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">x64</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">yarn </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">bin</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">yarn</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ npm install yarn </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">g</span></span>
<span class="line"><span style="color:#24292E;">$ ln </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">s </span><span style="color:#D73A49;">~</span><span style="color:#032F62;">/node/no</span><span style="color:#24292E;">de</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v9.</span><span style="color:#005CC5;">3.0</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">linux</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">x64</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">yarn </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">bin</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">yarn</span></span></code></pre></div><h4 id="_3-打包前端项目" tabindex="-1">3. 打包前端项目 <a class="header-anchor" href="#_3-打包前端项目" aria-label="Permalink to &quot;3. 打包前端项目&quot;">​</a></h4><blockquote><p>进入前端项目目录中，安装依赖</p></blockquote><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ npm install</span></span>
<span class="line"><span style="color:#E1E4E8;">或者是</span></span>
<span class="line"><span style="color:#E1E4E8;">$ yarn</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ npm install</span></span>
<span class="line"><span style="color:#24292E;">或者是</span></span>
<span class="line"><span style="color:#24292E;">$ yarn</span></span></code></pre></div><p><img src="https://upload-images.jianshu.io/upload_images/6555843-479e7a6715191392.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><h4 id="_4-打包项目" tabindex="-1">4.打包项目 <a class="header-anchor" href="#_4-打包项目" aria-label="Permalink to &quot;4.打包项目&quot;">​</a></h4><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$npm run build</span></span>
<span class="line"><span style="color:#E1E4E8;">或者是</span></span>
<span class="line"><span style="color:#E1E4E8;">$ yarn build</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$npm run build</span></span>
<span class="line"><span style="color:#24292E;">或者是</span></span>
<span class="line"><span style="color:#24292E;">$ yarn build</span></span></code></pre></div><p><img src="https://upload-images.jianshu.io/upload_images/6555843-b8bc67fbc8b686ea.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1021/format/webp" alt="img"></p><h4 id="_5-检查打包后的静态文件" tabindex="-1">5. 检查打包后的静态文件 <a class="header-anchor" href="#_5-检查打包后的静态文件" aria-label="Permalink to &quot;5. 检查打包后的静态文件&quot;">​</a></h4><blockquote><p>1.会多了这么个文件夹dist，里面就是打包好的静态文件。</p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/6555843-b9b72f8aae763563.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1003/format/webp" alt="img"></p><p><img src="https://upload-images.jianshu.io/upload_images/6555843-f8e0fd995ff3ac2b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/974/format/webp" alt="img"></p><h1 id="步骤6-将编译后的静态文件放到nginx中" tabindex="-1">步骤6：将编译后的静态文件放到nginx中 <a class="header-anchor" href="#步骤6-将编译后的静态文件放到nginx中" aria-label="Permalink to &quot;步骤6：将编译后的静态文件放到nginx中&quot;">​</a></h1><h4 id="_1-第一步-先把原来启动的8080端口的docker容器停止掉" tabindex="-1">1.第一步，先把原来启动的8080端口的docker容器停止掉 <a class="header-anchor" href="#_1-第一步-先把原来启动的8080端口的docker容器停止掉" aria-label="Permalink to &quot;1.第一步，先把原来启动的8080端口的docker容器停止掉&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-6939bc850bdcb4c2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p><img src="https://upload-images.jianshu.io/upload_images/6555843-4fd0d33b037f81b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><h4 id="_2-重新运行docker的nginx容器" tabindex="-1">2. 重新运行docker的nginx容器 <a class="header-anchor" href="#_2-重新运行docker的nginx容器" aria-label="Permalink to &quot;2. 重新运行docker的nginx容器&quot;">​</a></h4><blockquote><p>警告！此时你一定要在项目的根目录中哦，不然的话也可以根据你目前的目录简单调整启动命令。</p></blockquote><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">docker</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-d</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-p</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">8080</span><span style="color:#9ECBFF;">:80</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-v</span><span style="color:#E1E4E8;"> $PWD</span><span style="color:#9ECBFF;">/dist:/usr/share/nginx/html</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">docker</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-d</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-p</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">8080</span><span style="color:#032F62;">:80</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-v</span><span style="color:#24292E;"> $PWD</span><span style="color:#032F62;">/dist:/usr/share/nginx/html</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><blockquote><p>简单说明：<code>$PWD</code>是指的当前路径，上面的警告的意思是启动命令已经规定了是当前项目根目录下的<code>dist</code>文件夹(<code>$PWD/dist</code>)，如果不在项目根目录，会出现一些问题。</p></blockquote><h4 id="_3-检查刚才的nginx-8080-容器是否启动成功" tabindex="-1">3.检查刚才的nginx(8080)容器是否启动成功 <a class="header-anchor" href="#_3-检查刚才的nginx-8080-容器是否启动成功" aria-label="Permalink to &quot;3.检查刚才的nginx(8080)容器是否启动成功&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-3156b242ed033bb8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><blockquote><p>可以看到 正在运行 这时候访问浏览器测试8080端口是否成功部署静态页面。</p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/6555843-78f0963f90fded08.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><blockquote><p>至此，在CentOS7.5s上使用docker启动nginx并部署前端vue项目的记录暂时结束，下面一篇会简单的优化一点点小细节。</p></blockquote><h1 id="步骤7-增加前端启动命令-简化流程" tabindex="-1">步骤7：增加前端启动命令，简化流程 <a class="header-anchor" href="#步骤7-增加前端启动命令-简化流程" aria-label="Permalink to &quot;步骤7：增加前端启动命令，简化流程&quot;">​</a></h1><h4 id="_1-增加前端启动命令" tabindex="-1">1.增加前端启动命令 <a class="header-anchor" href="#_1-增加前端启动命令" aria-label="Permalink to &quot;1.增加前端启动命令&quot;">​</a></h4><blockquote><p>为什么要加上前端的启动命令呢？ 我们分析一下：前端代码改动后我们会进行下面几步操作：</p><ol><li>git pull 拉取最新代码</li><li>yarn build或者npm run build，进行打包</li><li>停止原来的nginx容器，启动新的nginx容器（除了第一次启动时外，非必须）</li></ol></blockquote><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">git pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">yarn </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">registry</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">https</span><span style="color:#F97583;">:</span><span style="color:#6A737D;">//registry.npm.taobao.org/ &amp;&amp; yarn build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#删除容器</span></span>
<span class="line"><span style="color:#E1E4E8;">docker rm </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">f demo1 </span><span style="color:#F97583;">&amp;&gt;</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">dev</span><span style="color:#F97583;">/</span><span style="color:#79B8FF;">null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">#启动容器</span></span>
<span class="line"><span style="color:#E1E4E8;">docker run </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">d </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">restart</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">on</span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">failure</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">\</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">p </span><span style="color:#79B8FF;">8080</span><span style="color:#F97583;">:</span><span style="color:#79B8FF;">80</span><span style="color:#E1E4E8;"> \</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">-</span><span style="color:#E1E4E8;">v $PWD</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">dist</span><span style="color:#F97583;">:/</span><span style="color:#E1E4E8;">usr</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">share</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">nginx</span><span style="color:#F97583;">/</span><span style="color:#E1E4E8;">html \</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">--</span><span style="color:#E1E4E8;">name demo1 nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">git pull</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">yarn </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">registry</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">https</span><span style="color:#D73A49;">:</span><span style="color:#6A737D;">//registry.npm.taobao.org/ &amp;&amp; yarn build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#删除容器</span></span>
<span class="line"><span style="color:#24292E;">docker rm </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">f demo1 </span><span style="color:#D73A49;">&amp;&gt;</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">/</span><span style="color:#24292E;">dev</span><span style="color:#D73A49;">/</span><span style="color:#005CC5;">null</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">#启动容器</span></span>
<span class="line"><span style="color:#24292E;">docker run </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">d </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">restart</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">on</span><span style="color:#D73A49;">-</span><span style="color:#24292E;">failure</span><span style="color:#D73A49;">:</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">\</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">p </span><span style="color:#005CC5;">8080</span><span style="color:#D73A49;">:</span><span style="color:#005CC5;">80</span><span style="color:#24292E;"> \</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">-</span><span style="color:#24292E;">v $PWD</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">dist</span><span style="color:#D73A49;">:/</span><span style="color:#24292E;">usr</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">share</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">nginx</span><span style="color:#D73A49;">/</span><span style="color:#24292E;">html \</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">--</span><span style="color:#24292E;">name demo1 nginx</span></span></code></pre></div><blockquote><p>这样的话 我们可以将这些操作合并在一个sh文件(linux中的)中，以后可能会有更多的命令，都可以放在一起</p></blockquote><h4 id="_2-根目录新增文件start-sh-如图-内容见上方" tabindex="-1">2.根目录新增文件start.sh，如图，内容见上方 <a class="header-anchor" href="#_2-根目录新增文件start-sh-如图-内容见上方" aria-label="Permalink to &quot;2.根目录新增文件start.sh，如图，内容见上方&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-109491de09dc2b49.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><p>image.png</p><blockquote><p>并随意修改App.vue，使其待会可以判断重启成功</p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/6555843-fab3501758763c69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1040/format/webp" alt="img"></p><p>image.png</p><h4 id="_3-提交代码到git后-服务器git-pull拉下来最新代码" tabindex="-1">3.提交代码到git后，服务器git pull拉下来最新代码 <a class="header-anchor" href="#_3-提交代码到git后-服务器git-pull拉下来最新代码" aria-label="Permalink to &quot;3.提交代码到git后，服务器git pull拉下来最新代码&quot;">​</a></h4><p><img src="https://upload-images.jianshu.io/upload_images/6555843-cd81568054ff5c8f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/717/format/webp" alt="img"></p><p>image.png</p><h4 id="_4-执行启动脚本" tabindex="-1">4. 执行启动脚本 <a class="header-anchor" href="#_4-执行启动脚本" aria-label="Permalink to &quot;4. 执行启动脚本&quot;">​</a></h4><div class="language-ruby vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ruby</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">$ sh start.sh</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">$ sh start.sh</span></span></code></pre></div><p><img src="https://upload-images.jianshu.io/upload_images/6555843-03e7078cc4c975c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1108/format/webp" alt="img"></p><p>image.png</p><blockquote><p>打开页面 即可看到页面发生了变化</p></blockquote><p><img src="https://upload-images.jianshu.io/upload_images/6555843-9cebf07deb06063c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1200/format/webp" alt="img"></p><h3 id="end" tabindex="-1">end <a class="header-anchor" href="#end" aria-label="Permalink to &quot;end&quot;">​</a></h3><blockquote><p>这里简单实用了linux中的sh脚本代替我们频繁重启中额外的操作</p></blockquote><h1 id="问题解决2-当vue路由采用history模式时-访问页面时会出现404找不到现象" tabindex="-1">问题解决2：当vue路由采用history模式时，访问页面时会出现404找不到现象 <a class="header-anchor" href="#问题解决2-当vue路由采用history模式时-访问页面时会出现404找不到现象" aria-label="Permalink to &quot;问题解决2：当vue路由采用history模式时，访问页面时会出现404找不到现象&quot;">​</a></h1><blockquote><p>以上几个教程里所使用的测试vue项目<code>(demo1)</code>均是十分简单的项目，完全没涉及到<code>router路由</code>或者其他的知识，今天一位小哥将自己的项目部署到<code>nginx</code>后，发现某些页面在访问的时候偶尔会出现<code>404</code>找不到，因此找到我，共同解决了这个问题。在解决过程中，发现这其实也是个<code>老生常谈</code>的问题，最主要就是vue项目的路由采用了<code>history模式</code>，才导致了这个问题。</p></blockquote><p>既然问题已经找到了，那么就应该探究下为什么会出现这个问题：</p><ul><li><h4 id="_1-首先我们先理解一下spa-单页web应用-的概念" tabindex="-1">1.首先我们先理解一下SPA(单页Web应用)的概念： <a class="header-anchor" href="#_1-首先我们先理解一下spa-单页web应用-的概念" aria-label="Permalink to &quot;1.首先我们先理解一下SPA(单页Web应用)的概念：&quot;">​</a></h4></li></ul><blockquote><p>由于我们是使用vue搭建的<code>单页web应用(SPA)</code>，就是只有一个Web页面的应用，是在打开页面的时候加载单个HTML页面(index.html)，在用户与程序交互的时候动态获取数据(axios)的Web页面程序。</p><ul><li>单页面应用程序： 只有在第一次才会向后台请求页面，之后的每次请求都是去获取到必要的数据，由页面上的js解析数据后动态展示到页面上</li><li>传统单页面程序： 每次页面的跳转都是去服务器请求页面</li></ul><p>因此，单页面应用程序的优势就体现出来了： <strong>减少请求的密度，加快了页面的响应速度，降低了服务器上的压力，有着更好的用户体验，让用户在web app上也能感受到native app的流畅。</strong></p></blockquote><ul><li><h4 id="_2-引出路由" tabindex="-1">2.引出路由 <a class="header-anchor" href="#_2-引出路由" aria-label="Permalink to &quot;2.引出路由&quot;">​</a></h4></li></ul><p>既然是单页面程序，那么我们看到的页面跳转是什么情况呢？一个页面怎么会来回跳转呢？此时就理所应当的引出vue中的重中之重，<strong>vue-router</strong>（单页面应用程序的<code>路径管理器</code>）。 vue的单页面应用是基于<code>路由</code>+<code>组件</code>的，路由用于设定<code>访问路径</code>，并且将<code>路径</code>与<code>组件</code>进行连接；在传统的多页面应用中，是使用一些超链接<code>&lt;a&gt;&lt;/a&gt;</code>来进行页面跳转与切换的；而在vue-router中，不是页面的切换，而是组件的切换，所以，路由的本质就是 <code>建立起url和组件之间的映射关系</code></p><ul><li><h5 id="vue-router的工作原理是什么呢" tabindex="-1">vue-router的工作原理是什么呢？ <a class="header-anchor" href="#vue-router的工作原理是什么呢" aria-label="Permalink to &quot;vue-router的工作原理是什么呢？&quot;">​</a></h5><p>SPA(single page application)</p><p>:单页面应用程序，其中只有一个完整的页面(index.html)；它在加载页面的时候，不会加载所有页面，而是只更新某个指定的容器中的内容。</p><p>单页面应用程序的核心之一就是：更新视图而不重新请求页面；</p><p>vue-router在实现单页面前端路由的时候，提供了两种方式：</p><p>Hash模式</p><p>与</p><p>History模式</p><p>，根据**mode参数来自由选择采用什么方式。</p></li><li><ol><li>Hash模式 vue-router默然采用的就是Hash模式---采用URL的Hash来模拟一个完整的URL，于是当URL发生改变的时候，页面不会重新加载。hash(#)是URL的锚点，代表的是网页中的一个<strong>位置</strong>，单单改变#后面的部分，浏览器只会滚动到相应的位置，而不会去后端请求网页资源，也就是说**#是用来指导浏览器动作**的，对服务器端完全不起作用，HTTP请求中也不包括#；同时每一次改变#后面的部分，都会在浏览器的访问历史中增加一个记录，当使用浏览器的“后退”按钮的时候，就可以返回上一个位置；<strong>所以说Hash模式是使用锚点值的改变，根据不同的值，渲染指定DOM元素的不同数据。</strong></li></ol></li><li><ol><li>history模式 由于Hash模式中会在URL上自带#，如果不想要很丑的#的话，我们可以使用路由的history模式，只需要在配置路由规则的时候，加入值：<code>mode:&#39;hostory&#39;</code>,这种模式充分利用了history.pushState API来完成URL跳转而无需重新加载页面。</li></ol></li></ul><div class="language-csharp vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;">//main.js文件中</span></span>
<span class="line"><span style="color:#F97583;">const</span><span style="color:#E1E4E8;"> router </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">new</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">VueRouter</span><span style="color:#E1E4E8;">({</span></span>
<span class="line"><span style="color:#E1E4E8;">  mode</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&#39;history&#39;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  routes</span><span style="color:#F97583;">:</span><span style="color:#E1E4E8;"> [</span><span style="color:#F97583;">..</span><span style="color:#E1E4E8;">.]</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;">//main.js文件中</span></span>
<span class="line"><span style="color:#D73A49;">const</span><span style="color:#24292E;"> router </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">new</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">VueRouter</span><span style="color:#24292E;">({</span></span>
<span class="line"><span style="color:#24292E;">  mode</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&#39;history&#39;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  routes</span><span style="color:#D73A49;">:</span><span style="color:#24292E;"> [</span><span style="color:#D73A49;">..</span><span style="color:#24292E;">.]</span></span>
<span class="line"><span style="color:#24292E;">})</span></span></code></pre></div><p>当你在使用history模式的时候，URL就会像是正常的URL，没有#存在，比较美观。不过这种模式如果不加以配置的话，会有一个深坑，深坑出现的原因简单介绍一下：</p><p>当我们使用history模式的时候进行页面跳转的时候，其vue-router原理是使用HTML5的新接口<code>pushState和replaceState</code>,这两个接口的最大的特点就是<strong>改变URL地址，但却不刷新页面</strong>，注意！！！<strong>仅仅改变网址，网页不是真正的跳转了，也不会获取到新的资源，本质上，网页还是停留在原来的页面(index.html)</strong>。</p><ul><li>举个栗子🌰： 打开首页后，你的URL显示<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fwww.xxx.com%2Fhome" target="_blank" rel="noreferrer">www.xxx.com/home</a>，这时候能正常显示，没问题，此时你进入到注册页，URL此时是<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fwww.xxx.com%2Fhome%2Freg" target="_blank" rel="noreferrer">www.xxx.com/home/reg</a>，这个时候，当你点击刷新时，浏览器就会拿着当前的地址<a href="https://links.jianshu.com/go?to=http%3A%2F%2Fwww.xxx.com%2Fhome%2Freg" target="_blank" rel="noreferrer">www.xxx.com/home/reg</a>去后台请求该资源，后台肯定没有对应的资源，所以就会报404找不到，这样就很明了了！</li><li>该怎样解决呢？ 栗子🌰中出现的问题，我们可以想想一下，假如一旦浏览器向服务器请求找不到404时，就还跳回到最初的index.html页面，页面再根据URL上的路径跳转到对应的组件里不就好了嘛！事实上，我们就是这么取解决的，在服务器上进行以下相关配置即可解决该问题！ <a href="https://links.jianshu.com/go?to=https%3A%2F%2Frouter.vuejs.org%2Fzh%2Fguide%2Fessentials%2Fhistory-mode.html%23%E5%90%8E%E7%AB%AF%E9%85%8D%E7%BD%AE%E4%BE%8B%E5%AD%90" target="_blank" rel="noreferrer">vue-router history后端配置例子</a></li></ul><p><strong>至此，还问题的前因后果已经讲清楚了，以后再遇到类似的问题也会有解决思路了，这样就很好，希望以后一直坚持住！</strong></p></div></div></main><footer class="VPDocFooter" data-v-a3c25e27 data-v-a2d931e4><!--[--><!--]--><!----><!----></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"css_basic_06-creative shape animation effects.md\":\"3e94c497\",\"css_basic_ghost text.md\":\"13717c87\",\"css_basic_loading text animation effects.md\":\"bf2895ae\",\"css_basic_pure css liquid button animation effects.md\":\"1ce8e4c0\",\"css_basic_css-button-effect.md\":\"d612cdd7\",\"css_gasp_01-liquid distortion slider.md\":\"21392898\",\"docs_rhino_01-context.md\":\"9a2cf2db\",\"docs_rhino_02-rhino.md\":\"2ba48cdd\",\"docs_java_01-optional.md\":\"c67094a4\",\"docs_minecraft_01-搭建vscode模组开发环境.md\":\"1ef6fd44\",\"basic_js_02-数组操作.md\":\"d622a605\",\"docs_minecraft_client_01-main.md\":\"4b7490d3\",\"docs_minecraft_client_02-网络.md\":\"79496f42\",\"docs_minecraft_gradle构建.md\":\"fb82f2ad\",\"docs_minecraft_文件命名规则.md\":\"59300cdd\",\"docs_other_centos 部署 egg.js.md\":\"9eb0f61b\",\"docs_other_ajax封装.md\":\"da66e57e\",\"docs_other_canvas.md\":\"bb254674\",\"docs_other_ipfs星际文件系统部署静态页.md\":\"f7aaff5e\",\"docs_other_mac下npm全局问题.md\":\"a62823c4\",\"docs_other_npm.md\":\"bf0b7bc5\",\"docs_other_nuxt笔记.md\":\"95316880\",\"css_basic_03-3d book mockup using css.md\":\"1a2a13c5\",\"docs_react_arco_modal.md\":\"e34f72c8\",\"css_basic_01-aspect-ratio.md\":\"5e2f7b4a\",\"docs_other_webpack性能优化.md\":\"166472ce\",\"basic_js_01-call_apply_bind.md\":\"1b6005da\",\"docs_other_我得vscode配置.md\":\"4d8fa049\",\"css_basic_04-animated eyes follow mouse cusror.md\":\"67e3d271\",\"docs_react_antd_alert.md\":\"5c95acb6\",\"basic_webpack_01-webpack面试题.md\":\"45ae7514\",\"basic_nodejs_nodejs调试.md\":\"a2c7487e\",\"css_basic_02-glitch-effect.md\":\"b3ea4cf2\",\"css_basic_05-background sphere rotate.md\":\"c83fe10a\",\"docs_minecraft_02-物品.md\":\"28d1d66d\",\"index.md\":\"ffcb56a4\",\"docs_other_瀑布流.md\":\"f9816269\",\"docs_vue_vue部署.md\":\"16f2af4c\",\"docs_vue_vue组件化.md\":\"33c3c9e3\",\"docs_other_web抓包.md\":\"be94eb06\",\"docs_react_umi.md\":\"510db213\",\"docs_react_basic_render.md\":\"491e5a75\",\"docs_react_basic_setstate.md\":\"b83357a3\",\"docs_react_basic_state_props.md\":\"63386c47\",\"docs_taro_taro3.2项目升级.md\":\"c075f69d\",\"docs_react_basic_源码.md\":\"7f49c704\",\"docs_reactnative_index.md\":\"ee2dffdd\",\"docs_react_basic_react.md\":\"c4f6c9f9\",\"docs_vue_vue2.6简答题.md\":\"f23dadb5\",\"docs_vue_vue-mustache.md\":\"7ed9e1aa\",\"docs_taro_taro-rn.md\":\"90f50d29\",\"docs_react_arco_alert.md\":\"3811284c\",\"docs_vue_vue原理实现.md\":\"090843e1\",\"docs_vue_vue3.md\":\"b1ee8e8e\",\"docs_react_basic_super()_super(props).md\":\"383b4c18\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"embers blog\",\"description\":\"全栈进阶之路\",\"base\":\"/blog/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"nav\":[{\"text\":\"java\",\"items\":[{\"text\":\"minecraft模组开发\",\"link\":\"/docs/minecraft/01-搭建vscode模组开发环境\"},{\"text\":\"GTNH(格雷科技新视野)\",\"link\":\"/yule/gtnh\"}]},{\"text\":\"web效果\",\"items\":[{\"text\":\"css\",\"link\":\"/css/basic/01-aspect-ratio\"}]},{\"text\":\"js\",\"items\":[{\"text\":\"基础操作\",\"link\":\"/basic/js/01-call_apply_bind\"}]},{\"text\":\"框架\",\"items\":[{\"text\":\"reactNative\",\"link\":\"/docs/reactNative/index\"}]}],\"sidebar\":{\"/css/basic\":[{\"text\":\"css\",\"collapsible\":true,\"items\":[{\"text\":\"aspect ratio\",\"link\":\"/css/basic/01-aspect-ratio\"},{\"text\":\"css button effect\",\"link\":\"/css/basic/css-button-effect\"},{\"text\":\"Ghost Text\",\"link\":\"/css/basic/Ghost Text\"},{\"text\":\"Loading Text Animation Effects\",\"link\":\"/css/basic/Loading Text Animation Effects\"},{\"text\":\"Pure CSS Liquid Button Animation Effects\",\"link\":\"/css/basic/Pure CSS Liquid Button Animation Effects\"},{\"text\":\"glitch effect\",\"link\":\"/css/basic/02-glitch-effect\"},{\"text\":\"3D Book Mockup Using CSS\",\"link\":\"/css/basic/03-3D Book Mockup Using CSS\"},{\"text\":\"Animated Eyes Follow Mouse Cusror\",\"link\":\"/css/basic/04-Animated Eyes Follow Mouse Cusror\"},{\"text\":\"Background sphere rotate\",\"link\":\"/css/basic/05-Background sphere rotate\"},{\"text\":\"Creative Shape Animation Effects\",\"link\":\"/css/basic/06-Creative Shape Animation Effects\"}]}],\"/css/gasp\":[{\"text\":\"gasp.js\",\"collapsible\":true,\"items\":[{\"text\":\"Liquid Distortion Slider\",\"link\":\"/css/gasp/01-Liquid Distortion Slider\"}]}],\"/basic\":[{\"text\":\"基础操作\",\"collapsible\":true,\"items\":[{\"text\":\"call_apply_bind\",\"link\":\"/basic/js/01-call_apply_bind\"},{\"text\":\"数组操作\",\"link\":\"/basic/js/02-数组操作\"}]}],\"/docs/react/basic\":[{\"text\":\"react\",\"collapsible\":true,\"items\":[{\"text\":\"life cycle\",\"link\":\"/docs/react/basic/life-cycle\"},{\"text\":\"react\",\"link\":\"/docs/react/basic/react\"},{\"text\":\"render\",\"link\":\"/docs/react/basic/render\"},{\"text\":\"setState\",\"link\":\"/docs/react/basic/setState\"},{\"text\":\"state_props\",\"link\":\"/docs/react/basic/state_props\"},{\"text\":\"super()_super(props)\",\"link\":\"/docs/react/basic/super()_super(props)\"}]}],\"/docs/react/antd\":[{\"text\":\"antd\",\"collapsible\":true,\"items\":[{\"text\":\"Alert\",\"link\":\"/docs/react/antd/Alert\"}]}],\"/docs/minecraft/\":[{\"text\":\"minecraft模组开发\",\"collapsible\":true,\"items\":[{\"text\":\"搭建vscode模组开发环境\",\"link\":\"/docs/minecraft/01-搭建vscode模组开发环境\"},{\"text\":\"物品\",\"link\":\"/docs/minecraft/02-物品\"}]}]},\"demoblock\":{\"root\":{\"view-source\":\"查看源代码\",\"hide-source\":\"隐藏源代码\",\"edit-in-editor\":\"在 Playground 中编辑\",\"edit-on-github\":\"在 Github 中编辑\",\"copy-code\":\"复制代码\",\"copy-success\":\"复制成功\",\"copy-error\":\"复制失败\"}}},\"locales\":{},\"scrollOffset\":90,\"cleanUrls\":false}");</script>
    
  </body>
</html>